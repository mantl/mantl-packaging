---
name: vault-mantl
version: 0.2.0
license: Apache-2.0
iteration: 1
vendor: Asteris, LLC.
architecture: x86_64
description: Mantl Vault
type: rpm

depends:
  - jq
  - consul
  - consul-cli >= 0.2.0

targets:
  - src: "{{.SpecRoot}}/vault-unseal-consul.sh"
    dest: /usr/local/bin/
  - src: "{{.SpecRoot}}/vault-bootstrap.sh"
    dest: /usr/local/bin/
  - src: "{{.SpecRoot}}/vault-enable-cert.sh"
    dest: /usr/local/bin/
  - src: "{{.SpecRoot}}/10-bootstrap.conf"
    dest: /etc/systemd/system/vault.service.d/
  - src: "{{.SpecRoot}}/policy-secure-token.hcl"
    dest: /etc/vault/policies/

extra-args: |
  --rpm-os linux
  --no-rpm-auto-add-directories
